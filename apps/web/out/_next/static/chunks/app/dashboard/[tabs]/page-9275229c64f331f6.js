(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[358],{1245:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var a=s(4568),r=s(7707),n=s(1874),l=s(7620),i=s(8359),o=s(7227),c=s(2942);function d(e){let{open:t,onOpenChange:s}=e,r=(0,c.useRouter)();return(0,a.jsx)(i.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(i.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(i.c7,{children:(0,a.jsx)(i.L3,{children:"Onboarding Required"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please complete your onboarding to generate a personalised workout plan. This will help us understand your fitness goals and create the best plan for you."}),(0,a.jsxs)(i.Es,{children:[(0,a.jsx)(o.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(o.$,{onClick:()=>{s(!1),r.push("/onboarding")},className:"bg-accent",children:"Start Onboarding"})]})]})]})})}var u=s(1778);function m(){let{redirectToPlan:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useRouter)(),s=r.F.useUtils(),[i,o]=(0,l.useState)(!1),m=r.F.workoutPlan.generatePlan.useMutation({onError:e=>{"Onboarding is not completed"===e.message?o(!0):n.o.error("Failed to generate plan",{description:e.message})},onSuccess:()=>{s.workoutPlan.getActivePlan.invalidate(),e&&t.push("/dashboard/your-plan")}});return{generatePlan:m.mutate,isLoading:m.isPending,error:m.error,LoadingScreen:()=>m.isPending?(0,a.jsx)("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(u.A,{className:"w-12 h-12 text-primary animate-pulse"})}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Generating Your Plan"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Please wait while we create your personalized workout plan..."})]})}):null,OnboardingDialog:(0,a.jsx)(d,{open:i,onOpenChange:o})}}},6808:(e,t,s)=>{Promise.resolve().then(s.bind(s,9641))},9641:(e,t,s)=>{"use strict";s.d(t,{default:()=>tW});var a=s(4568),r=s(3353),n=s(7227),l=s(7620),i=s(8359),o=s(5165),c=s(4529),d=s(9388),u=s(2487),m=s(8053),x=s(3444),h=s(2463),p=s(8262),g=s(7707);function f(e){let{open:t,onOpenChange:s,title:r,description:l,onConfirm:o,confirmText:c,variant:d="default"}=e;return(0,a.jsx)(i.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(i.Cf,{children:[(0,a.jsx)(i.c7,{children:(0,a.jsx)(i.L3,{children:r})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsx)("p",{children:l}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(n.$,{variant:d,onClick:o,children:null!=c?c:r})]})]})]})})}var y=s(6839),v=s(4711),j=s(3928);function N(e){let{...t}=e;return(0,a.jsx)(y.bL,{"data-slot":"accordion",...t})}function w(e){let{className:t,...s}=e;return(0,a.jsx)(y.q7,{"data-slot":"accordion-item",className:(0,j.cn)("border-b last:border-b-0",t),...s})}function b(e){let{className:t,children:s,...r}=e;return(0,a.jsx)(y.Y9,{className:"flex",children:(0,a.jsxs)(y.l9,{"data-slot":"accordion-trigger",className:(0,j.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...r,children:[s,(0,a.jsx)(v.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function k(e){let{className:t,children:s,...r}=e;return(0,a.jsx)(y.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...r,children:(0,a.jsx)("div",{className:(0,j.cn)("pt-0 pb-4",t),children:s})})}var A=s(7261),C=s.n(A),P=s(7129),S=s(2555),_=s(4675),F=s(3888);let D=l.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(F.bL,{ref:t,className:(0,j.cn)("relative flex w-full touch-none select-none items-center",s),...r,children:[(0,a.jsx)(F.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-accent/40",children:(0,a.jsx)(F.Q6,{className:"absolute h-full bg-accent"})}),(0,a.jsx)(F.zi,{className:"block h-5 w-5 rounded-full border-2 border-accent bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});D.displayName=F.bL.displayName;var M=s(1938),R=s(60),T=s(5006),W=s(5440),I=s(9436),q=s(213),E=s(9293),Q=s(5950),L=s(8581),$=s(1690),V=s(5516),z=s(9513),U=s(8987);function B(e){let{isOpen:t,onClose:s,columns:r,title:o="Select Value",onConfirm:c}=e,d=(0,l.useRef)(r.map(()=>0)),[u,m]=(0,l.useState)(null),[x,h]=(0,l.useState)(!1),p=(0,l.useRef)([]),g=(0,l.useRef)({});(0,l.useEffect)(()=>{t&&(d.current=r.map(()=>0),m(null),h(!1),p.current=[],Object.keys(g.current).forEach(e=>{let t=g.current[parseInt(e)];"number"==typeof t&&cancelAnimationFrame(t)}),g.current={})},[t,r]),(0,l.useEffect)(()=>()=>{Object.values(g.current).forEach(e=>{cancelAnimationFrame(e)})},[]);let f=(0,l.useCallback)((e,t)=>{let s=r[e];if(!s)return!1;if("up"===t){if("min"in s&&s.value<s.max)return s.setValue(s.value+1),!0;else if("options"in s){let e=s.options.indexOf(s.value),t=s.options[e+1];if(e<s.options.length-1&&"string"==typeof t)return s.setValue(t),!0}}else if("min"in s&&s.value>s.min)return s.setValue(s.value-1),!0;else if("options"in s){let e=s.options.indexOf(s.value),t=s.options[e-1];if(e>0&&"string"==typeof t)return s.setValue(t),!0}return!1},[r]),y=(0,l.useCallback)((e,t)=>{g.current[e]&&cancelAnimationFrame(g.current[e]);let s=t,a=0,r=()=>{if(.5>Math.abs(s))return void delete g.current[e];if(Math.abs(a+=s)>=10){if(!f(e,a>0?"up":"down"))return void delete g.current[e];a=0}s*=.95,g.current[e]=requestAnimationFrame(r)};g.current[e]=requestAnimationFrame(r)},[f]),v=(e,t)=>{let s=e.touches[0];if(s){let a=Date.now();m({y:s.clientY,time:a,columnIndex:t}),h(!1),p.current=[{y:s.clientY,time:a}],g.current[t]&&(cancelAnimationFrame(g.current[t]),delete g.current[t]),e.preventDefault()}},j=(e,t)=>{if(!u||u.columnIndex!==t)return;let s=e.touches[0];if(!s)return;let a=Date.now(),r=u.y-s.clientY,n=Math.abs(r);p.current.push({y:s.clientY,time:a}),p.current=p.current.filter(e=>a-e.time<100),n>5&&h(!0),n>10&&f(t,r>0?"up":"down")&&m({y:s.clientY,time:a,columnIndex:t}),e.preventDefault()},N=(e,t)=>{if(!u||u.columnIndex!==t){m(null),h(!1);return}let s=Date.now(),a=p.current.filter(e=>s-e.time<100);if(a.length>=2){let e=a[0],s=a[a.length-1],r=(null==e?void 0:e.time)&&(null==s?void 0:s.time)?s.time-e.time:0,n=(null==e?void 0:e.y)&&(null==s?void 0:s.y)?e.y-s.y:0;if(r>0){let e=n/r*50;Math.abs(e)>1&&y(t,e)}}m(null),h(!1),p.current=[],e.preventDefault()};return(0,a.jsx)(i.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(i.Cf,{className:"sm:max-w-[340px] bg-background",children:[(0,a.jsx)(i.c7,{children:(0,a.jsx)(i.L3,{children:o})}),(0,a.jsx)("div",{className:"flex flex-col items-center justify-center py-4",children:(0,a.jsx)("div",{className:"flex items-center justify-center relative px-2 py-4 gap-4 select-none",style:{touchAction:"none"},children:r.map((e,t)=>{let s=e.label?e.label:"col-".concat(t);if("min"in e){var r;let n=e.value,l=e.min,i=e.max,o=null!=(r=e.format)?r:e=>e.toString();return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative w-[60px] h-[132px] flex flex-col items-center justify-center touch-pan-y",onWheel:s=>{if("number"==typeof d.current[t]){for(d.current[t]+=s.deltaY;d.current[t]<=-20&&n>l;)e.setValue(n-1),d.current[t]+=20;for(;d.current[t]>=20&&n<i;)e.setValue(n+1),d.current[t]-=20}},onTouchStart:e=>v(e,t),onTouchMove:e=>j(e,t),onTouchEnd:e=>N(e,t),children:[(0,a.jsx)("div",{className:"h-[44px] flex items-center justify-center text-lg text-[var(--muted-foreground)] opacity-50 select-none",children:n>l?o(n-1):""}),(0,a.jsx)("div",{className:"absolute left-0 right-0 top-[44px] h-px bg-[var(--border)]"}),(0,a.jsxs)("div",{className:"h-[44px] flex items-center justify-center text-2xl font-bold text-[var(--foreground)] select-none",children:[o(n)," ",e.unit&&(0,a.jsx)("span",{className:"text-base font-normal ml-1",children:e.unit})]}),(0,a.jsx)("div",{className:"absolute left-0 right-0 top-[88px] h-px bg-[var(--border)]"}),(0,a.jsx)("div",{className:"h-[44px] flex items-center justify-center text-lg text-[var(--muted-foreground)] opacity-50 select-none",children:n<i?o(n+1):""}),(0,a.jsx)("div",{className:"absolute inset-0 z-10 cursor-pointer",style:{background:"transparent"},onClick:t=>{if(x)return;let s=t.nativeEvent.offsetY;s<44&&n>l&&e.setValue(n-1),s>88&&n<i&&e.setValue(n+1)}})]}),(0,a.jsx)("div",{className:"mt-1 text-xs text-[var(--muted-foreground)]",children:e.label})]},s)}{let r=e.value,n=e.options,l=n.indexOf(r);return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative w-[60px] h-[132px] flex flex-col items-center justify-center touch-pan-y",onWheel:s=>{if("number"==typeof d.current[t]&&-1!==l){for(d.current[t]+=s.deltaY;d.current[t]<=-20&&l>0;){let s=n[l-1];"string"==typeof s&&e.setValue(s),d.current[t]+=20}for(;d.current[t]>=20&&l<n.length-1;){let s=n[l+1];"string"==typeof s&&e.setValue(s),d.current[t]-=20}}},onTouchStart:e=>v(e,t),onTouchMove:e=>j(e,t),onTouchEnd:e=>N(e,t),children:[(0,a.jsx)("div",{className:"h-[44px] flex items-center justify-center text-lg text-[var(--muted-foreground)] opacity-50 select-none",children:l>0&&n[l-1]?n[l-1]:""}),(0,a.jsx)("div",{className:"absolute left-0 right-0 top-[44px] h-px bg-[var(--border)]"}),(0,a.jsx)("div",{className:"h-[44px] flex items-center justify-center text-2xl font-bold text-[var(--foreground)] select-none",children:r}),(0,a.jsx)("div",{className:"absolute left-0 right-0 top-[88px] h-px bg-[var(--border)]"}),(0,a.jsx)("div",{className:"h-[44px] flex items-center justify-center text-lg text-[var(--muted-foreground)] opacity-50 select-none",children:l<n.length-1&&n[l+1]?n[l+1]:""}),(0,a.jsx)("div",{className:"absolute inset-0 z-10 cursor-pointer",style:{background:"transparent"},onClick:t=>{if(x||-1===l)return;let s=t.nativeEvent.offsetY;if(s<44&&l>0){let t=n[l-1];"string"==typeof t&&e.setValue(t)}if(s>88&&l<n.length-1){let t=n[l+1];"string"==typeof t&&e.setValue(t)}}})]}),(0,a.jsx)("div",{className:"mt-1 text-xs text-[var(--muted-foreground)]",children:e.label})]},s)}})})}),(0,a.jsxs)(i.Es,{children:[(0,a.jsx)(n.$,{variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsx)(n.$,{onClick:c,children:"Confirm"})]})]})})}let O=l.forwardRef((e,t)=>{let{icon:s,value:r,placeholder:n,error:l,className:i,children:o,...c}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("button",{ref:t,type:"button",className:(0,j.cn)("flex items-center w-full border rounded-md px-3 py-2 text-left bg-[var(--background)] text-[var(--foreground)] border-[var(--input)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]/50 transition-colors",!r&&"text-[var(--muted-foreground)]",l&&"border-[var(--destructive)] focus:ring-[var(--destructive)]/50",i),...c,children:[s&&(0,a.jsx)(s,{className:"w-4 h-4 mr-2 text-muted-foreground"}),(0,a.jsx)("span",{className:"flex-1 text-left",children:null!=r?r:n}),(0,a.jsx)(v.A,{className:"w-4 h-4 ml-2 text-gray-300"})]}),l&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:l})]})});O.displayName="CustomInput";var Y=s(5530),H=s(3991),J=s(5870),Z=s(7911),G=s(9013);function K(e){let{className:t,classNames:s,showOutsideDays:r=!0,...l}=e;return(0,a.jsx)(G.hv,{showOutsideDays:r,className:(0,j.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:(0,j.cn)((0,n.r)({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,j.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===l.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,j.cn)((0,n.r)({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-secondary text-secondary-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{className:t,...s}=e;return(0,a.jsx)(J.A,{className:(0,j.cn)("size-4",t),...s})},IconRight:e=>{let{className:t,...s}=e;return(0,a.jsx)(Z.A,{className:(0,j.cn)("size-4",t),...s})}},...l})}var X=s(8360);function ee(e){let{...t}=e;return(0,a.jsx)(X.bL,{"data-slot":"popover",...t})}function et(e){let{...t}=e;return(0,a.jsx)(X.l9,{"data-slot":"popover-trigger",...t})}function es(e){let{className:t,align:s="center",sideOffset:r=4,...n}=e;return(0,a.jsx)(X.ZL,{children:(0,a.jsx)(X.UC,{"data-slot":"popover-content",align:s,sideOffset:r,className:(0,j.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}function ea(e){let{date:t,onSelect:s,placeholder:r="Pick a date",error:n}=e,[i,o]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(ee,{open:i,onOpenChange:o,children:[(0,a.jsx)(et,{asChild:!0,children:(0,a.jsxs)("button",{type:"button",className:(0,j.cn)("flex items-center w-full border rounded-md px-3 py-2 text-left bg-background focus:outline-none focus:ring-2 focus:ring-primary/50 transition-colors",!t&&"text-muted-foreground",n&&"border-destructive focus:ring-destructive/50"),children:[(0,a.jsx)(H.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"flex-1 text-left",children:t?t.toDateString()===new Date().toDateString()?"Today":(0,Y.GP)(t,"PPP"):r}),(0,a.jsx)(v.A,{className:"w-4 h-4 ml-2 text-gray-300"})]})}),(0,a.jsx)(es,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(K,{mode:"single",selected:t,onSelect:e=>{s&&s(e),e&&o(!1)}})})]}),n&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:n})]})}var er=s(6590),en=s(3176),el=s(4981),ei=s(6047),eo=s(1571),ec=s(1351),ed=s(8846),eu=s(7032),em=s(4456),ex=s(6592);function eh(){let e=(0,er._)(["gen_random_uuid()"]);return eh=function(){return e},e}function ep(){let e=(0,er._)(["gen_random_uuid()"]);return ep=function(){return e},e}function eg(){let e=(0,er._)(["gen_random_uuid()"]);return eg=function(){return e},e}function ef(){let e=(0,er._)(["gen_random_uuid()"]);return ef=function(){return e},e}function ey(){let e=(0,er._)(["gen_random_uuid()"]);return ey=function(){return e},e}function ev(){let e=(0,er._)(["now()"]);return ev=function(){return e},e}function ej(){let e=(0,er._)(["now()"]);return ej=function(){return e},e}function eN(){let e=(0,er._)(["gen_random_uuid()"]);return eN=function(){return e},e}function ew(){let e=(0,er._)(["now()"]);return ew=function(){return e},e}function eb(){let e=(0,er._)(["gen_random_uuid()"]);return eb=function(){return e},e}function ek(){let e=(0,er._)(["now()"]);return ek=function(){return e},e}function eA(){let e=(0,er._)(["now()"]);return eA=function(){return e},e}function eC(){let e=(0,er._)(["now()"]);return eC=function(){return e},e}function eP(){let e=(0,er._)(["gen_random_uuid()"]);return eP=function(){return e},e}function eS(){let e=(0,er._)(["gen_random_uuid()"]);return eS=function(){return e},e}function e_(){let e=(0,er._)(["now()"]);return e_=function(){return e},e}let eF=(0,el.rL)("workout_type",["class","workout"]),eD=(0,el.rL)("workout_status",["completed","not_completed","not_recorded"]),eM=(0,el.rL)("activity_type",["run","cycle","swim","walk","hike","rowing","elliptical","workout"]),eR=(0,el.rL)("role",["developer","user","assistant"]),eT=(0,ei.cJ)("user",{id:(0,eo.uR)("id").primaryKey().unique(),email:(0,ec.Qq)("email").notNull().unique(),name:(0,ec.Qq)("name")}),eW=(0,ei.cJ)("workout",{id:(0,eo.uR)("id").primaryKey().default((0,en.ll)(eh())),name:(0,ec.Qq)("name").notNull(),instructor:(0,ec.Qq)("instructor").notNull(),duration:(0,ed.nd)("duration").notNull(),description:(0,ec.Qq)("description").notNull(),level:(0,ec.Qq)("level").notNull(),bookedDate:(0,eu.vE)("booked_date"),type:eF("type").notNull(),status:eD("status").default("not_recorded"),isBooked:(0,em.zM)("is_booked").notNull().default(!1),classId:(0,ed.nd)("class_id"),userId:(0,eo.uR)("user_id").notNull().references(()=>eT.id,{onDelete:"cascade",onUpdate:"cascade"}),activityType:eM("activity_type")});(0,ei.cJ)("workout_tracking",{id:(0,eo.uR)("id").primaryKey().default((0,en.ll)(ep())),userId:(0,eo.uR)("user_id").notNull().references(()=>eT.id,{onDelete:"cascade",onUpdate:"cascade"}),workoutId:(0,eo.uR)("workout_id"),activityType:(0,ec.Qq)("activity_type").notNull(),date:(0,eu.vE)("date").notNull(),durationHours:(0,ed.nd)("duration_hours"),durationMinutes:(0,ed.nd)("duration_minutes"),distance:(0,ec.Qq)("distance"),distanceUnit:(0,ec.Qq)("distance_unit"),notes:(0,ec.Qq)("notes"),intensity:(0,ed.nd)("intensity"),name:(0,ec.Qq)("name"),wouldDoAgain:(0,em.zM)("would_do_again"),exercises:(0,ex.Fx)("exercises").$type()});let eI=(0,ei.cJ)("workout_plan",{id:(0,eo.uR)("id").primaryKey().default((0,en.ll)(eg())),userId:(0,eo.uR)("user_id").notNull().references(()=>eT.id,{onDelete:"cascade",onUpdate:"cascade"}),planName:(0,ec.Qq)("plan_name").notNull(),weeks:(0,ed.nd)("weeks").notNull(),savedAt:(0,eu.vE)("saved_at").notNull(),archived:(0,em.zM)("archived").notNull().default(!1),archivedAt:(0,eu.vE)("archived_at"),isActive:(0,em.zM)("is_active").notNull().default(!1),startDate:(0,eu.vE)("start_date"),pausedAt:(0,eu.vE)("paused_at"),resumedAt:(0,eu.vE)("resumed_at"),totalPausedDuration:(0,ed.nd)("total_paused_duration").notNull().default(0),isAI:(0,em.zM)("ai_generated").notNull().default(!1),explanation:(0,ec.Qq)("ai_explanation")});function eq(e){let{exercises:t,onChange:s}=e,r=e=>{s(t.filter(t=>t.id!==e))},l=(e,a)=>{s(t.map(t=>t.id===e?{...t,name:a}:t))},i=e=>{s(t.map(t=>t.id===e?{...t,sets:[...t.sets,{id:crypto.randomUUID(),reps:0,weight:0}]}:t))},d=(e,a)=>{s(t.map(t=>t.id===e?{...t,sets:t.sets.filter(e=>e.id!==a)}:t))},u=(e,a,r,n)=>{s(t.map(t=>t.id===e?{...t,sets:t.sets.map(e=>e.id===a?{...e,[r]:n}:e)}:t))};return(0,a.jsxs)("div",{className:"space-y-4",children:[t.map(e=>(0,a.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(S.J,{children:"Exercise"}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>r(e.id),className:"h-8 w-8",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(o.p,{placeholder:"Exercise name",value:e.name,onChange:t=>l(e.id,t.target.value)}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(S.J,{children:"Sets"}),(0,a.jsxs)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>i(e.id),children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Add Set"]})]}),e.sets.map((t,s)=>(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Set ",s+1]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(S.J,{className:"text-xs",children:"Reps"}),(0,a.jsx)(o.p,{type:"number",min:"0",value:t.reps,onChange:s=>u(e.id,t.id,"reps",parseInt(s.target.value)||0)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(S.J,{className:"text-xs",children:"Weight (kg)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.p,{type:"number",min:"0",step:"0.5",value:t.weight,onChange:s=>u(e.id,t.id,"weight",parseFloat(s.target.value)||0)}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>d(e.id,t.id),className:"h-10 w-10",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]})]})]},t.id))]})]},e.id)),(0,a.jsxs)(n.$,{type:"button",variant:"outline",onClick:()=>{s([...t,{id:crypto.randomUUID(),name:"",sets:[]}])},className:"w-full",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Add Exercise"]})]})}(0,ei.cJ)("weekly_schedule",{id:(0,eo.uR)("id").primaryKey().default((0,en.ll)(ef())),planId:(0,eo.uR)("plan_id").notNull().references(()=>eI.id,{onDelete:"cascade",onUpdate:"cascade"}),weekNumber:(0,ed.nd)("week_number").notNull(),workoutId:(0,eo.uR)("workout_id").notNull().references(()=>eW.id,{onDelete:"cascade",onUpdate:"cascade"})}),(0,ei.cJ)("onboarding",{id:(0,eo.uR)("id").primaryKey().default((0,en.ll)(ey())),userId:(0,eo.uR)("user_id").notNull().references(()=>eT.id,{onDelete:"cascade",onUpdate:"cascade"}).unique(),step:(0,ec.Qq)("step").notNull(),completedAt:(0,eu.vE)("completed_at"),createdAt:(0,eu.vE)("created_at").notNull().default((0,en.ll)(ev())),updatedAt:(0,eu.vE)("updated_at").notNull().default((0,en.ll)(ej())),name:(0,ec.Qq)("name"),age:(0,ed.nd)("age"),height:(0,ed.nd)("height"),weight:(0,ed.nd)("weight"),gender:(0,ec.Qq)("gender"),fitnessLevel:(0,ec.Qq)("fitness_level"),exercises:(0,ec.Qq)("exercises").array(),otherExercises:(0,ec.Qq)("other_exercises").array(),exerciseFrequency:(0,ec.Qq)("exercise_frequency"),sessionLength:(0,ec.Qq)("session_length"),injuries:(0,em.zM)("injuries"),injuriesDetails:(0,ec.Qq)("injuries_details"),recentSurgery:(0,em.zM)("recent_surgery"),surgeryDetails:(0,ec.Qq)("surgery_details"),chronicConditions:(0,ec.Qq)("chronic_conditions").array(),otherHealthConditions:(0,ec.Qq)("other_health_conditions").array(),pregnancy:(0,ec.Qq)("pregnancy"),fitnessGoals:(0,ec.Qq)("fitness_goals").array(),goalTimeline:(0,ec.Qq)("goal_timeline"),specificGoals:(0,ec.Qq)("specific_goals"),pilatesExperience:(0,em.zM)("pilates_experience"),pilatesDuration:(0,ec.Qq)("pilates_duration"),studioFrequency:(0,ec.Qq)("studio_frequency"),sessionPreference:(0,ec.Qq)("session_preference"),apparatusPreference:(0,ec.Qq)("apparatus_preference").array(),customApparatus:(0,ec.Qq)("custom_apparatus"),motivation:(0,ec.Qq)("motivation").array(),otherMotivation:(0,ec.Qq)("other_motivation").array(),progressTracking:(0,ec.Qq)("progress_tracking").array(),otherProgressTracking:(0,ec.Qq)("other_progress_tracking").array()}),(0,ei.cJ)("personal_trainer_interactions",{id:(0,eo.uR)("id").primaryKey().default((0,en.ll)(eN())),userId:(0,eo.uR)("user_id").notNull().references(()=>eT.id,{onDelete:"cascade",onUpdate:"cascade"}),createdAt:(0,eu.vE)("created_at").notNull().default((0,en.ll)(ew())),type:(0,ec.Qq)("type").notNull(),content:(0,ec.Qq)("content").notNull(),context:(0,ex.Fx)("context"),parentId:(0,eo.uR)("parent_id"),metadata:(0,ex.Fx)("metadata")}),(0,ei.cJ)("progress_tracking",{id:(0,eo.uR)("id").primaryKey().default((0,en.ll)(eb())),userId:(0,eo.uR)("user_id").notNull().references(()=>eT.id,{onDelete:"cascade",onUpdate:"cascade"}),date:(0,eu.vE)("date").notNull().default((0,en.ll)(ek())),type:(0,ec.Qq)("type").notNull(),metrics:(0,ex.Fx)("metrics").notNull().default({}),achievements:(0,ec.Qq)("achievements").array().default([]),challenges:(0,ec.Qq)("challenges").array().default([]),notes:(0,ec.Qq)("notes"),createdAt:(0,eu.vE)("created_at").notNull().default((0,en.ll)(eA())),updatedAt:(0,eu.vE)("updated_at").notNull().default((0,en.ll)(eC()))}),(0,ei.cJ)("ai_system_prompt",{id:(0,eo.uR)("id").primaryKey().default((0,en.ll)(eP())),userId:(0,eo.uR)("user_id").notNull().references(()=>eT.id,{onDelete:"cascade",onUpdate:"cascade"}),name:(0,ec.Qq)("name").notNull(),prompt:(0,ec.Qq)("prompt").notNull(),createdAt:(0,eu.vE)("created_at").notNull()}),(0,ei.cJ)("ai_chat",{id:(0,eo.uR)("id").primaryKey().default((0,en.ll)(eS())),userId:(0,eo.uR)("user_id").notNull().references(()=>eT.id,{onDelete:"cascade",onUpdate:"cascade"}),message:(0,ec.Qq)("message").notNull(),createdAt:(0,eu.vE)("created_at").notNull().default((0,en.ll)(e_())),role:eR("role").notNull(),content:(0,ec.Qq)("content").notNull()});let eE=T.Ik({id:T.Yj(),reps:T.ai().min(1,"Reps must be at least 1"),weight:T.ai().min(0,"Weight must be 0 or greater")}),eQ=T.Ik({id:T.Yj(),name:T.Yj().min(1,"Exercise name is required"),sets:T.YO(eE).min(1,"At least one set is required")}),eL=T.Ik({workoutType:T.Yj({required_error:"Please select an activity type"}),date:T.p6(),durationHours:T.ai().min(0,"Hours must be 0 or greater"),durationMinutes:T.ai().min(0,"Minutes must be 0 or greater").max(59,"Minutes must be less than 60"),distance:T.Yj().optional(),distanceUnit:T.k5(["miles","kilometers"],{required_error:"Please select a distance unit"}),intensity:T.ai().min(1,"Please rate the intensity from 1-10").max(10,"Rating must be between 1-10"),notes:T.Yj().optional(),workoutId:T.Yj().optional(),exercises:T.YO(eQ).optional()}),e$=eM.enumValues,eV={run:W.A,cycle:I.A,swim:q.A,walk:E.A,hike:Q.A,rowing:L.A,elliptical:$.A,workout:V.A};function ez(e){return/^\d+$/.test(null!=e?e:"")?parseInt(e,10):0}function eU(e){var t,s,r,o,c,d,u;let{isDialogOpen:m,setIsDialogOpen:x,handleSubmitActivity:h,initialActivityType:p,workoutId:g}=e,f=(0,M.mN)({resolver:(0,R.u)(eL),defaultValues:{workoutType:null!=p?p:"",date:new Date,durationHours:0,durationMinutes:0,distance:"",distanceUnit:"kilometers",intensity:5,notes:"",workoutId:g,exercises:[]}});(0,l.useEffect)(()=>{p&&f.setValue("workoutType",p)},[p,f]);let[y,v]=(0,l.useState)(!1),[j,N]=(0,l.useState)(f.watch("durationHours")),[w,b]=(0,l.useState)(f.watch("durationMinutes")),[k,A]=(0,l.useState)(!1),[C,F]=(null!=(c=f.watch("distance"))?c:"0.0").toString().split("."),[T,I]=(0,l.useState)(ez(C)),[q,E]=(0,l.useState)(ez(F)),[Q,L]=(0,l.useState)("miles"===f.watch("distanceUnit")?"mi":"km"),$="workout"===f.watch("workoutType"),[V,Y]=(0,l.useState)(null!=(d=f.watch("exercises"))?d:[]);return(0,l.useEffect)(()=>{f.setValue("exercises",V)},[V,f]),(0,a.jsx)(i.lG,{open:m,onOpenChange:x,children:(0,a.jsxs)(i.Cf,{className:"max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(i.c7,{children:(0,a.jsx)(i.L3,{children:"Record Manual Activity"})}),(0,a.jsxs)("form",{onSubmit:f.handleSubmit(e=>{h({...e,workoutId:g}),f.reset(),Y([])}),className:"space-y-6 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Activity Type"}),(0,a.jsxs)(_.l6,{value:f.watch("workoutType"),onValueChange:e=>f.setValue("workoutType",e),children:[(0,a.jsxs)(_.bq,{className:"flex items-center w-full border rounded-md px-3 py-2 text-left bg-background focus:outline-none focus:ring-2 focus:ring-primary/50 transition-colors gap-2",children:[!f.watch("workoutType")&&(0,a.jsx)(W.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"flex-1 text-left",children:(0,a.jsx)(_.yv,{placeholder:"Select activity type"})})]}),(0,a.jsx)(_.gC,{children:e$.map(e=>{let t=eV[e];return(0,a.jsx)(_.eb,{value:e,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t,{className:"w-4 h-4"}),e.charAt(0).toUpperCase()+e.slice(1)]})},e)})})]}),f.formState.errors.workoutType&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:f.formState.errors.workoutType.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Date"}),(0,a.jsx)(ea,{date:f.watch("date"),onSelect:e=>f.setValue("date",null!=e?e:new Date),error:null==(t=f.formState.errors.date)?void 0:t.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Duration"}),(0,a.jsx)(O,{icon:z.A,value:0===f.watch("durationHours")&&0===f.watch("durationMinutes")?void 0:"".concat(f.watch("durationHours"),"h ").concat(f.watch("durationMinutes").toString().padStart(2,"0"),"m"),placeholder:"Set duration",onClick:()=>v(!0),error:null!=(u=null==(s=f.formState.errors.durationHours)?void 0:s.message)?u:null==(r=f.formState.errors.durationMinutes)?void 0:r.message})]}),(0,a.jsx)(B,{isOpen:y,onClose:()=>{v(!1),N(f.watch("durationHours")),b(f.watch("durationMinutes"))},title:"Select Duration",columns:[{label:"Hours",value:j,setValue:N,min:0,max:24,format:e=>e.toString(),unit:"h"},{label:"Minutes",value:w,setValue:b,min:0,max:59,format:e=>e.toString().padStart(2,"0"),unit:"m"}],onConfirm:()=>{f.setValue("durationHours",j),f.setValue("durationMinutes",w),v(!1)}}),$?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Resistance Training"}),(0,a.jsx)(eq,{exercises:V,onChange:Y}),f.formState.errors.exercises&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:f.formState.errors.exercises.message})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Distance"}),(0,a.jsx)(O,{icon:U.A,value:f.watch("distance")?"".concat(f.watch("distance")).concat("miles"===f.watch("distanceUnit")?" mi":" km"):void 0,placeholder:"Set distance",onClick:()=>A(!0),error:null==(o=f.formState.errors.distance)?void 0:o.message})]}),(0,a.jsx)(B,{isOpen:k,onClose:()=>{var e;A(!1);let[t,s]=(null!=(e=f.watch("distance"))?e:"0.0").split(".");I(ez(t)),E(ez(s)),L("miles"===f.watch("distanceUnit")?"mi":"km")},title:"Set Distance",columns:[{label:"",value:T,setValue:I,min:0,max:99,format:e=>e.toString()},{label:"",value:q,setValue:E,min:0,max:9,format:e=>"."+e.toString()},{label:"",value:Q,setValue:e=>L(e),options:["km","mi"]}],onConfirm:()=>{f.setValue("distance","".concat(T,".").concat(q)),f.setValue("distanceUnit","mi"===Q?"miles":"kilometers"),A(!1)}})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"How was the activity? (1-10)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(D,{value:[f.watch("intensity")],onValueChange:e=>{var t;return f.setValue("intensity",null!=(t=e[0])?t:5)},max:10,min:1,step:1,className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"1 - Very Easy"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:f.watch("intensity")}),(0,a.jsx)("span",{children:"10 - Very Hard"})]})]}),f.formState.errors.intensity&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:f.formState.errors.intensity.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"notes",children:"Notes"}),(0,a.jsx)(P.T,{id:"notes",placeholder:"How did you feel? What went well? What could be improved?",...f.register("notes"),className:"min-h-[100px]"})]}),(0,a.jsxs)(i.Es,{className:"flex flex-row w-full gap-2",children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>{x(!1),f.reset()},className:"w-1/2",children:"Cancel"}),(0,a.jsx)(n.$,{type:"submit",className:"bg-accent w-1/2",children:"Save Activity"})]})]})]})})}function eB(e){let{workout:t,onBookingSubmit:s,isActivePlan:r,onWorkoutComplete:l}=e;return r?"class"===t.type?"completed"===t.status?(0,a.jsxs)("span",{className:"inline-flex items-center text-xs px-3 py-1 h-7 bg-green-100 text-green-800 rounded",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M20 6L9 17l-5-5"})}),"Done"]}):(0,a.jsx)(n.$,{size:"sm",onClick:()=>s(t.id,t.isBooked,t.name),className:"text-xs px-3 py-1 h-7 bg-orange-100 text-orange-800",children:t.isBooked?"Booked":"Book"}):"workout"===t.type?"completed"===t.status?(0,a.jsxs)("span",{className:"inline-flex items-center text-xs px-3 py-1 h-7 bg-green-100 text-green-800 rounded",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M20 6L9 17l-5-5"})}),"Done"]}):(0,a.jsx)(n.$,{size:"sm",onClick:()=>l(t.id),className:"text-xs px-3 py-1 h-7 bg-orange-100 text-orange-800",children:"Completed?"}):null:null}function eO(e){let{isActivePlan:t,weeks:s,isEditing:r=!1,onDeleteClass:i,onAddClass:o,onBookClass:u,editingWeeks:m=new Set,onToggleWeekEdit:x,accordionValuePrefix:h=""}=e,[f,y]=(0,l.useState)(!1),[v,j]=(0,l.useState)(),[A,P]=(0,l.useState)(),S=g.F.useUtils(),{mutate:_}=g.F.workoutPlan.insertManualActivity.useMutation({onSuccess:()=>{S.workoutPlan.getActivityHistory.invalidate()}}),{mutate:F}=g.F.workoutPlan.updateWorkoutStatus.useMutation({onSuccess:()=>{S.workoutPlan.getActivePlan.invalidate()}});function D(e,t,s){t||null==u||u(e,s)}return(0,a.jsxs)(N,{type:"multiple",className:"w-full",children:[s.map(e=>(0,a.jsxs)(w,{value:"".concat(h,"week-").concat(e.weekNumber),children:[(0,a.jsxs)(b,{className:"font-bold text-base px-4 py-3 bg-muted/30",children:["Week ",e.weekNumber," ",(0,a.jsx)("span",{className:"ml-2 font-normal text-sm text-muted-foreground",children:"".concat(e.classesPerWeek>0?"".concat(e.classesPerWeek," Class").concat(1===e.classesPerWeek?"":"es"):"").concat(e.classesPerWeek>0&&e.workoutsPerWeek>0?", ":""," ").concat(e.workoutsPerWeek>0?"".concat(e.workoutsPerWeek," Workout").concat(1===e.workoutsPerWeek?"":"s"):"")}),e.items.filter(Boolean).length>0&&(0,a.jsxs)("span",{className:"ml-2 font-normal text-sm text-muted-foreground",children:["(",Math.round(e.items.filter(Boolean).filter(e=>(null==e?void 0:e.status)==="completed").length/e.items.filter(Boolean).length*100),"% completed)"]})]}),(0,a.jsxs)(k,{className:"px-2 md:px-4 pb-4",children:[r&&x&&(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsxs)(C(),{href:"#",className:"text-sm text-muted-foreground flex items-center gap-2",onClick:t=>{t.preventDefault(),x(e.weekNumber)},children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),m.has(e.weekNumber)?"Done Editing":"Edit week ".concat(e.weekNumber)]})}),(0,a.jsx)("div",{className:"space-y-3",children:e.items.filter(Boolean).map((s,l)=>(0,a.jsxs)("div",{className:"py-3 px-3 flex flex-col gap-2 border-l-4 rounded border-b ".concat("class"===s.type?"border-[color:var(--accent)] bg-[color:var(--accent)]/10":"border-[color:var(--chart-4)] bg-[color:var(--chart-4)]/10"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:["class"===s.type?(0,a.jsxs)("span",{className:"inline-flex items-center text-xs text-blue-700",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 4v16m8-8H4"})}),"Class"]}):(0,a.jsxs)("span",{className:"inline-flex items-center text-xs text-green-700",children:[(0,a.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M8 12h8"})]}),"Workout"]}),(0,a.jsx)("span",{className:"font-semibold text-base",children:s.name})]}),(0,a.jsxs)("div",{className:"flex gap-1 mb-1",children:[(0,a.jsx)("span",{className:"text-xs rounded bg-[var(--secondary)]/10 text-[var(--secondary)] px-2 py-0.5",children:s.level}),(0,a.jsxs)("span",{className:"text-xs rounded bg-[var(--secondary)]/10 text-[var(--secondary)] px-2 py-0.5",children:[s.duration," min"]})]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:s.description})]}),(0,a.jsx)(eB,{workout:s,onBookingSubmit:D,isActivePlan:t,onWorkoutComplete:()=>{j(s.activityType),P(void 0),y(!0)}})]}),r&&m.has(e.weekNumber)&&"class"===s.type&&i&&(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2 pt-2 border-t",children:(0,a.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>i(e.weekNumber,l),className:"w-full text-red-500 hover:text-red-700 hover:bg-red-50 hover:border-red-200",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Delete"]})})]},l))}),r&&m.has(e.weekNumber)&&o&&(0,a.jsx)("div",{className:"mt-4 flex justify-center",children:(0,a.jsxs)(n.$,{variant:"outline",size:"sm",className:"w-full",onClick:()=>o(e.weekNumber),children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Add New Class"]})})]})]},e.weekNumber)),(0,a.jsx)(eU,{isDialogOpen:f,setIsDialogOpen:y,handleSubmitActivity:function(e){_(e),A&&F({workoutId:A,status:"completed"}),y(!1)},initialActivityType:v,workoutId:A})]})}var eY=s(1245),eH=s(6043);function eJ(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,j.cn)("animate-pulse rounded-md bg-muted",t),...s})}function eZ(){return(0,a.jsxs)(r.Zp,{className:"bg-white border border-gray-100 rounded-xl shadow-lg overflow-hidden",children:[(0,a.jsx)(r.aR,{className:"px-6 pt-6 pb-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eJ,{className:"h-8 w-64"}),(0,a.jsx)(eJ,{className:"h-4 w-48"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eJ,{className:"h-6 w-24 rounded-full"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eJ,{className:"h-6 w-32"}),(0,a.jsx)(eJ,{className:"h-8 w-8 rounded-md"})]})]})]})}),(0,a.jsx)(r.Wu,{className:"p-0",children:(0,a.jsx)("div",{className:"space-y-4 p-6",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(eJ,{className:"h-6 w-32"}),(0,a.jsx)(eJ,{className:"h-8 w-24"})]}),(0,a.jsx)("div",{className:"space-y-2",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(eJ,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsx)(eJ,{className:"h-5 w-48"}),(0,a.jsx)(eJ,{className:"h-4 w-32"})]}),(0,a.jsx)(eJ,{className:"h-8 w-24"})]},e))})]},e))})})]})}function eG(){return(0,a.jsx)("div",{className:"space-y-4",children:[1,2].map(e=>(0,a.jsxs)(r.Zp,{className:"border border-gray-100 rounded-xl shadow-sm",children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between px-6 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eJ,{className:"h-6 w-48"}),(0,a.jsx)(eJ,{className:"h-4 w-32"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eJ,{className:"h-4 w-24"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(eJ,{className:"h-8 w-24"}),(0,a.jsx)(eJ,{className:"h-8 w-24"})]})]})]}),(0,a.jsx)(r.Wu,{className:"p-0",children:(0,a.jsx)("div",{className:"space-y-4 p-6",children:[1,2].map(e=>(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(eJ,{className:"h-6 w-32"}),(0,a.jsx)(eJ,{className:"h-8 w-24"})]}),(0,a.jsx)("div",{className:"space-y-2",children:[1,2].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(eJ,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsx)(eJ,{className:"h-5 w-48"}),(0,a.jsx)(eJ,{className:"h-4 w-32"})]}),(0,a.jsx)(eJ,{className:"h-8 w-24"})]},e))})]},e))})})]},e))})}var eK=s(2942);function eX(){let e=(0,eK.useRouter)(),[t,s]=(0,l.useState)(!1),[y,v]=(0,l.useState)(!1),[j,N]=(0,l.useState)(""),[w,b]=(0,l.useState)(new Set),[k,A]=(0,l.useState)(!1),[C,P]=(0,l.useState)(!1),[S,_]=(0,l.useState)({open:!1,title:"",description:"",onConfirm:()=>{console.log("confirm")},variant:"default"}),[F,D]=(0,l.useState)(null),M=g.F.useUtils(),{data:R=[],isLoading:T}=g.F.workoutPlan.getPreviousPlans.useQuery(),{data:W,isLoading:I}=g.F.workoutPlan.getActivePlan.useQuery(),{data:q=[]}=g.F.workoutPlan.getSupplementaryWorkouts.useQuery(),E=g.F.workoutPlan.startWorkoutPlan.useMutation({onSuccess:()=>{M.workoutPlan.getActivePlan.invalidate()}}),Q=g.F.workoutPlan.pauseWorkoutPlan.useMutation({onSuccess:()=>{M.workoutPlan.getActivePlan.invalidate()}}),L=g.F.workoutPlan.resumeWorkoutPlan.useMutation({onSuccess:()=>{M.workoutPlan.getActivePlan.invalidate()}}),$=g.F.workoutPlan.restartWorkoutPlan.useMutation({onSuccess:()=>{M.workoutPlan.getActivePlan.invalidate()}}),V=g.F.workoutPlan.cancelWorkoutPlan.useMutation({onSuccess:()=>{M.workoutPlan.getActivePlan.invalidate(),M.workoutPlan.getPreviousPlans.invalidate()}}),z=g.F.workoutPlan.updatePlanName.useMutation({onSuccess:()=>{M.workoutPlan.getActivePlan.invalidate()}}),U=g.F.workoutPlan.deleteWorkoutPlan.useMutation({onSuccess:()=>{M.workoutPlan.getActivePlan.invalidate(),M.workoutPlan.getPreviousPlans.invalidate()}});g.F.workoutPlan.bookClass.useMutation({onSuccess:()=>{M.workoutPlan.getUpcomingClasses.invalidate(),M.workoutPlan.getActivePlan.invalidate()}});let{generatePlan:B,OnboardingDialog:O,isLoading:Y,LoadingScreen:H}=(0,eY.A)(),J=(null==W?void 0:W.isActive)&&!(null==W?void 0:W.pausedAt)&&W.startDate?"active":(null==W?void 0:W.pausedAt)?"paused":"not started",Z=(e,t)=>{let s=R[t];return s?Array.from({length:e},(e,t)=>{var a,r,n;let l=[...null!=(n=null==(r=s.weeklySchedules)||null==(a=r[t])?void 0:a.items)?n:[],...q];return{weekNumber:t+1,items:l,classesPerWeek:l.filter(e=>e&&"class"===e.type).length,workoutsPerWeek:l.filter(e=>e&&"workout"===e.type).length}}):[]},G=e=>{let t=R[e];(null==t?void 0:t.id)&&(D(t.id),_({open:!0,title:"Delete Plan",description:"Are you sure you want to delete this plan? This action cannot be undone.",onConfirm:K,variant:"destructive"}))},K=()=>{F&&(U.mutate({planId:F}),_({...S,open:!1}),D(null))},X=()=>{_({open:!0,title:(null==W?void 0:W.pausedAt)?"Resume Plan":"Start Plan",description:(null==W?void 0:W.pausedAt)?"Are you sure you want to resume this plan?":"Are you sure you want to start this plan? This will become your active workout plan.",onConfirm:()=>{(null==W?void 0:W.pausedAt)?(null==W?void 0:W.id)&&L.mutate({planId:W.id},{onSuccess:()=>{_({...S,open:!1})},onError:e=>{console.error("Failed to resume plan:",e)}}):(null==W?void 0:W.id)&&E.mutate({planId:W.id},{onSuccess:()=>{_({...S,open:!1})},onError:e=>{console.error("Failed to start plan:",e)}})}})},ee=e=>{let t=R[e];(null==t?void 0:t.id)&&_({open:!0,title:"Reinstate Plan",description:"Are you sure you want to reinstate this plan? Your current active plan will be archived.",onConfirm:()=>{(null==W?void 0:W.id)?V.mutate({planId:W.id},{onSuccess:()=>{$.mutate({planId:t.id},{onSuccess:()=>{_({...S,open:!1}),M.workoutPlan.getPreviousPlans.invalidate()}})}}):$.mutate({planId:t.id},{onSuccess:()=>{_({...S,open:!1}),M.workoutPlan.getPreviousPlans.invalidate()}})},variant:"default"})},et=()=>{B()};return(0,a.jsxs)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[O,(0,a.jsx)(H,{}),I?(0,a.jsx)(eZ,{}):W?(0,a.jsx)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsxs)(r.Zp,{className:"bg-white border border-gray-100 rounded-xl shadow-lg overflow-hidden",children:[(0,a.jsx)(r.aR,{className:"px-6 pt-6 pb-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.ZB,{className:"text-2xl font-semibold text-gray-900",children:"Your Personalized Plan"}),(0,a.jsx)(r.BT,{className:"text-gray-500",children:"Combined classes and supplementary workouts"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("active"===J?"bg-[#34C759]/10 text-[#34C759]":"paused"===J?"bg-[#FF9500]/10 text-[#FF9500]":"bg-gray-100 text-gray-600"),children:"active"===J?"Active Plan":"paused"===J?"Paused Plan":"Not Started"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:(null==W?void 0:W.planName)||"Not Started"}),(null==W?void 0:W.planName)&&(0,a.jsx)(n.$,{size:"sm",variant:"ghost",onClick:()=>{(null==W?void 0:W.planName)&&(N(W.planName),v(!0))},className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})})]})]})]})}),(0,a.jsx)(r.Wu,{className:"p-0",children:(0,a.jsx)(eO,{weeks:(null==W?void 0:W.weeklySchedules)?W.weeklySchedules.map(e=>({weekNumber:e.weekNumber,items:e.items,classesPerWeek:e.items.filter(e=>e&&"class"===e.type).length,workoutsPerWeek:e.items.filter(e=>e&&"workout"===e.type).length})):[],isEditing:"not started"===J,onDeleteClass:(e,t)=>{},onAddClass:e=>{},onBookClass:(t,s)=>{let a="";a=s.toLowerCase().includes("reformer")?"Reformer":"Pilates",e.push("/dashboard/classes?sessionType=".concat(a))},editingWeeks:w,onToggleWeekEdit:e=>{b(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},isActivePlan:!0})})]})}):(0,a.jsxs)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col items-center justify-center py-12 bg-white rounded-xl shadow-lg border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"No Active Plan"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6 text-center max-w-md",children:"You don't have an active workout plan yet. Create a new plan to get started on your fitness journey!"}),(0,a.jsxs)(n.$,{variant:"outline",onClick:et,className:"border-gray-200 text-accent hover:bg-gray-50 transition-colors",disabled:Y,children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2"}),Y?"Generating Plan...":"Create New Plan"]})]}),W&&"not started"===J&&(0,a.jsxs)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"flex w-full gap-3 pt-2 justify-between",children:[(0,a.jsxs)(n.$,{variant:"outline",onClick:et,className:"border-gray-200 text-accent hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Create New Plan"]}),(0,a.jsxs)(n.$,{onClick:X,className:"bg-accent text-white hover:bg-accent/90 transition-colors",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Start Plan"]})]}),("active"===J||"paused"===J)&&(0,a.jsxs)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"flex w-full gap-3 pt-2 justify-between",children:["active"===J?(0,a.jsxs)(n.$,{variant:"outline",onClick:()=>{_({open:!0,title:"Pause Plan",description:"Are you sure you want to pause this plan? You can resume it later.",onConfirm:()=>{var e;_({...S,open:!1}),Q.mutate({planId:null!=(e=null==W?void 0:W.id)?e:""})}})},className:"border-gray-200 text-[#FF9500] hover:bg-[#FF9500]/10 transition-colors",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Pause"]}):(0,a.jsxs)(n.$,{variant:"outline",onClick:X,className:"border-gray-200 text-[#34C759] hover:bg-[#34C759]/10 transition-colors",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Resume"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(n.$,{variant:"outline",onClick:()=>{_({open:!0,title:"Reset Plan",description:"Are you sure you want to reset this plan? This will reset all progress and start from the beginning.",onConfirm:()=>{(null==W?void 0:W.id)&&$.mutate({planId:W.id},{onSuccess:()=>{_({...S,open:!1})}})}})},className:"border-gray-200 text-gray-600 hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Reset"]}),(0,a.jsxs)(n.$,{variant:"destructive",onClick:()=>{_({open:!0,title:"Cancel Plan",description:"Are you sure you want to cancel this plan? This action cannot be undone.",onConfirm:()=>{_({...S,open:!1}),(null==W?void 0:W.id)&&V.mutate({planId:W.id})},variant:"destructive"})},className:"bg-[#FF3B30] text-white hover:bg-[#FF3B30]/90 transition-colors",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]}),T?(0,a.jsxs)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"pt-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Previous Plans"}),(0,a.jsx)(eG,{})]}):R.length>0&&(0,a.jsxs)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"pt-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Previous Plans"}),(0,a.jsx)("div",{className:"space-y-4",children:[...R].sort((e,t)=>new Date(t.savedAt).getTime()-new Date(e.savedAt).getTime()).map((e,t)=>(0,a.jsx)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:(0,a.jsxs)(r.Zp,{className:"border border-gray-100 rounded-xl shadow-sm hover:shadow-md transition-all",children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between px-6 py-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.ZB,{className:"text-lg font-semibold text-gray-900",children:e.planName}),(0,a.jsxs)(r.BT,{className:"text-gray-500",children:[e.weeks," Week Plan"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.savedAt).toLocaleDateString()}),(0,a.jsxs)("div",{className:"flex gap-2 ml-2",children:[(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>ee(t),className:"h-8 border-gray-200 text-[#007AFF] hover:bg-gray-50 transition-colors","aria-label":"Reinstate plan",children:[(0,a.jsx)(x.A,{className:"w-3.5 h-3.5 mr-1.5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Reinstate"})]}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>G(t),className:"h-8 border-gray-200 text-[#FF3B30] hover:bg-[#FF3B30]/10 transition-colors","aria-label":"Delete plan",children:[(0,a.jsx)(p.A,{className:"w-3.5 h-3.5 mr-1.5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]}),(0,a.jsx)(r.Wu,{className:"p-0",children:(0,a.jsx)(eO,{weeks:Z(parseInt(e.weeks.toString()),t),accordionValuePrefix:"prev-".concat(t,"-"),isActivePlan:!1})})]})},t))})]}),(0,a.jsx)(f,{open:t,onOpenChange:s,title:"Delete Plan",description:"Are you sure you want to delete this plan? This action cannot be undone.",onConfirm:K,variant:"destructive"}),(0,a.jsx)(f,{open:S.open,onOpenChange:e=>_({...S,open:e}),title:S.title,description:S.description,onConfirm:S.onConfirm,variant:S.variant}),(0,a.jsx)(i.lG,{open:y,onOpenChange:v,children:(0,a.jsxs)(i.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(i.c7,{children:(0,a.jsx)(i.L3,{className:"text-xl font-semibold text-gray-900",children:"Edit Plan Name"})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"planName",className:"text-sm font-medium text-gray-700",children:"Plan Name"}),(0,a.jsx)(o.p,{id:"planName",value:j,onChange:e=>N(e.target.value),placeholder:"Enter plan name",className:"border-gray-200 focus:border-[#007AFF] focus:ring-[#007AFF]"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>v(!1),className:"border-gray-200 text-gray-600 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,a.jsx)(n.$,{onClick:()=>{(null==W?void 0:W.id)&&z.mutate({planId:W.id,newName:j}),v(!1)},className:"bg-[#007AFF] text-white hover:bg-[#007AFF]/90 transition-colors",children:"Save Changes"})]})]})]})}),(0,a.jsx)(i.lG,{open:k,onOpenChange:A,children:(0,a.jsxs)(i.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(i.c7,{children:(0,a.jsx)(i.L3,{className:"text-xl font-semibold text-gray-900",children:"Add New Class"})}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>A(!1),className:"border-gray-200 text-gray-600 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,a.jsx)(n.$,{onClick:()=>{A(!1)},className:"bg-[#007AFF] text-white hover:bg-[#007AFF]/90 transition-colors",children:"Add Class"})]})})]})})]})}var e0=s(5344),e1=s(1356),e4=s(6473),e2=s(4652);function e5(e){let{title:t,description:s,children:n,showViewAll:l=!0,viewAllText:i="View All Classes",viewAllHref:o="#"}=e;return(0,a.jsx)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsxs)(r.Zp,{className:"bg-white text-[var(--card-foreground)] border border-[var(--border)] rounded-xl shadow-lg overflow-hidden",children:[(0,a.jsxs)(r.aR,{className:"px-6 pt-6 pb-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)(r.ZB,{className:"text-2xl font-semibold text-gray-900",children:t})}),(0,a.jsx)(r.BT,{className:"text-[var(--muted-foreground)]",children:s})]}),(0,a.jsx)(r.Wu,{className:"px-6 pb-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[n,l&&(0,a.jsx)("div",{children:(0,a.jsxs)("a",{href:o,className:"text-sm text-[var(--accent)] hover:text-[color:var(--accent)]/80 font-medium flex items-center transition-colors",children:[i,(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})})]})})]})})}var e3=s(4049);let e9=T.Ik({intensity:T.ai().min(1,"Please select an intensity"),wouldDoAgain:T.k5(["yes","no"],{required_error:"Please select whether you would do this workout again"}),notes:T.Yj().optional()});function e6(e){let{isDialogOpen:t,setIsDialogOpen:s,handleSubmitWorkoutDetails:r,workoutId:l,bookedDate:o,name:c}=e,d=(0,M.mN)({resolver:(0,R.u)(e9),defaultValues:{intensity:5,wouldDoAgain:void 0,notes:""}});return(0,a.jsx)(i.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(i.Cf,{children:[(0,a.jsx)(i.c7,{children:(0,a.jsx)(i.L3,{children:"Record Workout Details"})}),(0,a.jsxs)("form",{onSubmit:d.handleSubmit(e=>{r(l,e,o,c),d.reset()}),className:"space-y-6 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"How was the workout? (1-10)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(D,{value:[d.watch("intensity")],onValueChange:e=>{var t;return d.setValue("intensity",null!=(t=e[0])?t:5)},max:10,min:1,step:1,className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"1 - Very Easy"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:d.watch("intensity")}),(0,a.jsx)("span",{children:"10 - Very Hard"})]})]}),d.formState.errors.intensity&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:d.formState.errors.intensity.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{children:"Would you do this workout again?"}),(0,a.jsxs)(e3.z,{value:d.watch("wouldDoAgain"),onValueChange:e=>d.setValue("wouldDoAgain",e),className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(e3.C,{value:"yes",id:"would-do-yes"}),(0,a.jsx)(S.J,{htmlFor:"would-do-yes",children:"Yes"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(e3.C,{value:"no",id:"would-do-no"}),(0,a.jsx)(S.J,{htmlFor:"would-do-no",children:"No"})]})]}),d.formState.errors.wouldDoAgain&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:d.formState.errors.wouldDoAgain.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"notes",children:"Notes"}),(0,a.jsx)(P.T,{id:"notes",placeholder:"How did you feel? What went well? What could be improved?",...d.register("notes"),className:"min-h-[100px]"})]}),(0,a.jsxs)(i.Es,{children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",className:"border-[var(--border)] text-[var(--primary)]",onClick:()=>{s(!1),d.reset()},children:"Cancel"}),(0,a.jsx)(n.$,{type:"submit",className:"bg-[var(--primary)] text-[var(--primary-foreground)] hover:bg-[color:var(--primary)]/90",children:"Save Details"})]})]})]})})}var e7=s(1874);function e8(){return(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between border-b pb-3 last:border-0 last:pb-0 border-gray-100",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eJ,{className:"h-5 w-32"}),(0,a.jsx)(eJ,{className:"h-4 w-48"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-right",children:[(0,a.jsx)(eJ,{className:"h-4 w-20 ml-auto"}),(0,a.jsx)(eJ,{className:"h-4 w-32 ml-auto"}),(0,a.jsx)(eJ,{className:"h-8 w-28 ml-auto"})]})]},e))})}function te(){return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(eJ,{className:"h-10 w-full"}),[1,2].map(e=>(0,a.jsxs)("div",{className:"flex flex-col bg-gray-50 rounded-lg p-4 shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(eJ,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eJ,{className:"h-5 w-32"}),(0,a.jsx)(eJ,{className:"h-4 w-48"}),(0,a.jsx)(eJ,{className:"h-4 w-40"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6 self-end",children:[(0,a.jsx)(eJ,{className:"h-9 w-32"}),(0,a.jsx)(eJ,{className:"h-9 w-32"})]})]},e))]})}function tt(){return(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between border-b pb-3 last:border-0 last:pb-0 border-gray-100",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eJ,{className:"h-5 w-32"}),(0,a.jsx)(eJ,{className:"h-4 w-40"})]}),(0,a.jsx)(eJ,{className:"h-5 w-24"})]},e))})}var ts=s(2346),ta=s(6734),tr=s(1467);function tn(){let{data:e,isLoading:t}=g.F.personalTrainer.getLatestProgress.useQuery();if(t)return(0,a.jsx)("div",{className:"grid gap-4 grid-cols-2",children:Array.from({length:4}).map((e,t)=>(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(eJ,{className:"h-4 w-[100px]"}),(0,a.jsx)(eJ,{className:"h-4 w-4"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)(eJ,{className:"h-8 w-[80px] mb-2"}),(0,a.jsx)(eJ,{className:"h-2 w-full"})]})]},t))});if(!e)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,a.jsx)(W.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Progress Data Yet"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Start your fitness journey by completing your first workout to see your progress metrics."})]});let s=e.metrics;return(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-2",children:[(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",children:"Consistency"}),(0,a.jsx)(ta.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[" ",Math.round(100*s.consistency),"%"]}),(0,a.jsx)(ts.k,{value:100*s.consistency,className:"mt-2"})]})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",children:"Intensity"}),(0,a.jsx)(W.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[" ",Math.round(s.intensity),"/10"]}),(0,a.jsx)(ts.k,{value:10*s.intensity,className:"mt-2"})]})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",children:"Duration"}),(0,a.jsx)(z.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[" ",Math.round(s.duration)," min"]}),(0,a.jsx)(ts.k,{value:s.duration/60*100,className:"mt-2"})]})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",children:"Completion Rate"}),(0,a.jsx)(tr.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[" ",Math.round(100*s.completionRate),"%"]}),(0,a.jsx)(ts.k,{value:100*s.completionRate,className:"mt-2"})]})]})]})}function tl(e){let{isDialogOpen:t,setIsDialogOpen:s,onSubmit:r,workoutId:l}=e;return(0,a.jsx)(i.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(i.Cf,{children:[(0,a.jsx)(i.c7,{children:(0,a.jsx)(i.L3,{children:"Mark Class Missed"})}),(0,a.jsx)("p",{children:"Are you sure you want to mark this class as missed?"}),(0,a.jsxs)(i.Es,{children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",className:"border-[var(--border)] text-[var(--primary)]",onClick:()=>{s(!1)},children:"Cancel"}),(0,a.jsx)(n.$,{type:"submit",className:"bg-[var(--primary)] text-[var(--primary-foreground)] hover:bg-[color:var(--primary)]/90",onClick:()=>r(l),children:"Yes"})]})]})})}function ti(){var e,t,s,r,i;let o=g.F.useUtils(),{data:d,isLoading:u}=g.F.workoutPlan.getUpcomingClasses.useQuery(),{data:m=[],isLoading:x}=g.F.workoutPlan.getWorkoutsToLog.useQuery(),{data:h=[],isLoading:p}=g.F.workoutPlan.getActivityHistory.useQuery({}),{mutate:f,isPending:y}=g.F.workoutPlan.insertManualActivity.useMutation({onSuccess:()=>{o.workoutPlan.getActivityHistory.invalidate()}}),{mutate:v,isPending:j}=g.F.workoutPlan.insertCompletedClass.useMutation({onSuccess:()=>{e7.o.success("Workout details saved successfully"),o.workoutPlan.getWorkoutsToLog.invalidate()}}),{mutate:N,isPending:w}=g.F.workoutPlan.updateWorkoutStatus.useMutation({onSuccess:()=>{o.workoutPlan.getWorkoutsToLog.invalidate()}}),{generatePlan:b,OnboardingDialog:k,isLoading:A,LoadingScreen:C}=(0,eY.A)(),[P,S]=(0,l.useState)(null),[_,F]=(0,l.useState)(!1),[D,M]=(0,l.useState)(!1),[R,T]=(0,l.useState)(!1),I=e=>{S(e),F(!0)},q=e=>{S(e),M(!0)},E=async e=>{T(!1),f(e,{onSuccess:()=>{e7.o.success("Activity recorded successfully")},onError:e=>{console.error("Failed to record activity:",e),e7.o.error("Failed to record activity"),T(!0)}})},Q=e=>{if(!e)return(0,a.jsx)(z.A,{className:"h-4 w-4 text-yellow-500"});switch(e){case"completed":return(0,a.jsx)(e0.A,{className:"h-4 w-4 text-green-500"});case"not_completed":return(0,a.jsx)(e1.A,{className:"h-4 w-4 text-red-500"});case"not_recorded":return(0,a.jsx)(z.A,{className:"h-4 w-4 text-yellow-500"})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[k,(0,a.jsx)(C,{}),(0,a.jsx)(e5,{title:"Progress Tracking",description:"Your progress over the past 7 days",showViewAll:!1,children:(0,a.jsx)(tn,{})}),(0,a.jsx)(e5,{title:"Upcoming Classes",description:d&&(null==d?void 0:d.length)>0?"Your scheduled sessions:":"No upcoming classes scheduled",viewAllHref:"classes",children:u?(0,a.jsx)(e8,{}):d&&(null==d?void 0:d.length)!==0?d.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-100 pb-3 last:border-0 last:pb-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.instructor," • ",e.duration," min"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2 text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.level}),(0,a.jsxs)("span",{className:"text-accent text-sm font-medium",children:["Booked for"," ",new Date(null!=(s=e.bookedDate)?s:"").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),(0,a.jsx)("button",{className:"rounded-md bg-gray-100 px-3 py-1 text-sm text-gray-700 transition-colors hover:bg-gray-200",children:"Manage Booking"})]})]},t)}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 rounded-lg border border-dashed border-gray-200 bg-gray-50 px-4 py-8 text-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)(e4.A,{className:"h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"No Upcoming Classes"}),(0,a.jsx)("p",{className:"mb-6 max-w-md text-center text-gray-500",children:"You don't have any classes scheduled. Create a workout plan to get started with your fitness journey!"})]}),(0,a.jsxs)("div",{className:"flex w-full max-w-sm flex-col gap-3",children:[(0,a.jsxs)(n.$,{className:"bg-accent hover:bg-accent/90 w-full text-white transition-colors",onClick:()=>{b()},disabled:A,children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),A?"Creating Plan...":"Create Workout Plan"]}),(0,a.jsx)(n.$,{variant:"outline",className:"text-accent w-full border-gray-200 transition-colors hover:bg-gray-50",onClick:()=>T(!0),disabled:y,children:y?"Recording...":"Record Activity"})]})]})}),(0,a.jsx)(e5,{title:"Workout Logging",description:"".concat(m.length>0?"Record your past workouts":"No past workouts logged yet"),showViewAll:!1,children:x?(0,a.jsx)(te,{}):(0,a.jsxs)(a.Fragment,{children:[m.length>0&&(0,a.jsxs)(n.$,{onClick:()=>T(!0),className:"bg-accent hover:bg-accent/90 flex w-full items-center gap-2 text-white transition-colors",disabled:y,children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),y?"Recording...":"Record Manual Activity"]}),0===m.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 rounded-lg border border-dashed border-gray-200 bg-gray-50 px-4 py-8 text-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)(W.A,{className:"h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"No Past Activities"}),(0,a.jsx)("p",{className:"mb-6 max-w-md text-center text-gray-500",children:"You haven't recorded any activities yet. Start tracking your fitness journey by recording your workouts!"})]}),(0,a.jsx)(n.$,{variant:"outline",className:"text-accent w-full max-w-sm border-gray-200 transition-colors hover:bg-gray-50",onClick:()=>T(!0),disabled:y,children:y?"Recording...":"Record Activity"})]}):(0,a.jsx)("div",{className:"mt-4 space-y-4",children:m.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex flex-col rounded-lg border border-gray-100 bg-gray-50 p-4 shadow-sm transition-all hover:shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"flex items-center justify-center rounded-full bg-white p-2 shadow-sm",children:Q(e.status)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.instructor," • ",e.duration," min"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Booked for"," ",new Date(null!=(s=e.bookedDate)?s:"").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex gap-3 self-end",children:[(0,a.jsx)(n.$,{className:"bg-[#34C759] text-white transition-colors hover:bg-[#34C759]/90",onClick:()=>I(e),disabled:j,children:j?"Marking...":"Mark Complete"}),(0,a.jsx)(n.$,{className:"bg-[#FF3B30] text-white transition-colors hover:bg-[#FF3B30]/90",onClick:()=>q(e),disabled:w,children:w?"Marking...":"Mark Missed"})]})]},t)})})]})}),(0,a.jsx)(e5,{title:"Activity History",description:"Your recent workouts and progress",viewAllText:"View All Activities",viewAllHref:"history",showViewAll:h.length>0,children:p?(0,a.jsx)(tt,{}):0===h.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 rounded-lg border border-dashed border-gray-200 bg-gray-50 px-4 py-8 text-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)(e2.A,{className:"h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"No Past Activities"}),(0,a.jsx)("p",{className:"mb-6 max-w-md text-center text-gray-500",children:"You haven't recorded any activities yet. Start tracking your fitness journey by recording your workouts!"})]}),(0,a.jsx)(n.$,{variant:"outline",className:"text-accent w-full max-w-sm border-gray-200 transition-colors hover:bg-gray-50 bg-brand-amber",onClick:()=>T(!0),disabled:y,children:y?"Recording...":"Record Activity"})]}):h.filter(e=>e.name).map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-100 pb-3 last:border-0 last:pb-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:new Date(null!=(s=null==e?void 0:e.date)?s:"").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),(0,a.jsx)("div",{className:"text-right",children:"workout"===e.activityType&&e.durationHours&&e.durationMinutes?(0,a.jsxs)("p",{className:"text-accent font-medium",children:[e.durationHours,"h ",e.durationMinutes,"m"]}):null})]},t)})}),(0,a.jsx)(e6,{isDialogOpen:_,setIsDialogOpen:F,handleSubmitWorkoutDetails:(e,t,s,a)=>{v({workoutId:e,activityType:"class",date:s,notes:t.notes,intensity:t.intensity,wouldDoAgain:"yes"===t.wouldDoAgain,name:a}),F(!1),S(null)},workoutId:null!=(s=null==P||null==(e=P.id)?void 0:e.toString())?s:"",bookedDate:(null==P?void 0:P.bookedDate)?new Date(P.bookedDate):new Date,name:null!=(r=null==P?void 0:P.name)?r:""}),(0,a.jsx)(tl,{isDialogOpen:D,setIsDialogOpen:M,onSubmit:e=>{N({workoutId:e,status:"not_completed"}),M(!1),S(null)},workoutId:null!=(i=null==P||null==(t=P.id)?void 0:t.toString())?i:""}),(0,a.jsx)(eU,{isDialogOpen:R,setIsDialogOpen:T,handleSubmitActivity:E})]})}var to=s(649);function tc(e){let{className:t,...s}=e;return(0,a.jsx)(to.bL,{"data-slot":"tabs",className:(0,j.cn)("flex flex-col gap-2",t),...s})}function td(e){let{className:t,...s}=e;return(0,a.jsx)(to.UC,{"data-slot":"tabs-content",className:(0,j.cn)("flex-1 outline-none",t),...s})}var tu=s(9649),tm=s(615);let tx=(0,tm.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function th(e){let{className:t,variant:s,asChild:r=!1,...n}=e,l=r?tu.DX:"span";return(0,a.jsx)(l,{"data-slot":"badge",className:(0,j.cn)(tx({variant:s}),t),...n})}let tp={Running:(0,a.jsx)(W.A,{className:"h-5 w-5 text-[#007AFF]"}),Cycling:(0,a.jsx)(I.A,{className:"h-5 w-5 text-[#007AFF]"}),Swimming:(0,a.jsx)(q.A,{className:"h-5 w-5 text-[#007AFF]"}),Walking:(0,a.jsx)(E.A,{className:"h-5 w-5 text-[#007AFF]"}),Hiking:(0,a.jsx)(Q.A,{className:"h-5 w-5 text-[#007AFF]"}),Rowing:(0,a.jsx)(W.A,{className:"h-5 w-5 text-[#007AFF]"}),Elliptical:(0,a.jsx)(W.A,{className:"h-5 w-5 text-[#007AFF]"})};function tg(){let[e,t]=(0,l.useState)(new Date),[s,i]=(0,l.useState)(1),[o,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)([]),x=g.F.useUtils(),{data:h=[],isLoading:p}=g.F.workoutPlan.getActivityHistory.useQuery({limit:10,offset:(s-1)*10}),{data:f=0}=g.F.workoutPlan.getActivityHistoryCount.useQuery(),{mutate:y}=g.F.workoutPlan.insertManualActivity.useMutation({onSuccess:()=>{x.workoutPlan.getActivityHistory.invalidate()}});(0,l.useEffect)(()=>{h.length>0&&m(e=>1===s?h:[...e,...h])},[h,s]);let v=u.length<f,j=(e,t)=>{let s=null!=e?e:0,a=null!=t?t:0;return 0===s?"".concat(a," min"):0===a?"".concat(s," hr"):"".concat(s," hr ").concat(a," min")},N=e=>{let t=new Date,s=new Date(e),a=Math.floor(Math.abs(t.getTime()-s.getTime())/864e5);return 0===a?"Today, ".concat(s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})):1===a?"Yesterday, ".concat(s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})):s.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})},w=async e=>{y(e),d(!1),e7.o.success("Activity recorded successfully")};return(0,a.jsxs)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[(0,a.jsx)("div",{children:0!==u.length||p?(0,a.jsxs)(tc,{defaultValue:"list",className:"w-full",children:[(0,a.jsxs)(td,{value:"list",className:"space-y-4",children:[u.map((e,t)=>{var s;return(0,a.jsx)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:(0,a.jsx)(r.Zp,{className:"overflow-hidden bg-white border border-gray-100 rounded-xl shadow-sm hover:shadow-md transition-all",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-[#007AFF]/10",children:null!=(s=tp[e.name])?s:(0,a.jsx)(W.A,{className:"h-5 w-5 text-[#007AFF]"})}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.name})]}),(0,a.jsx)(th,{variant:"outline",className:"".concat("class"===e.activityType?"bg-[#5856D6]/10 text-[#5856D6] border-0":"bg-[#34C759]/10 text-[#34C759] border-0"," text-xs font-medium px-3 py-1 rounded-full"),children:e.activityType})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm mt-3",children:[e.durationHours&&e.durationMinutes?(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-500",children:[(0,a.jsx)(z.A,{className:"h-4 w-4"}),j(e.durationHours,e.durationMinutes)]}):null,e.distance&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-500",children:[(0,a.jsxs)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M12 16v-4M12 8h.01"})]}),e.distance," ",e.distanceUnit]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-500",children:[(0,a.jsx)(e4.A,{className:"h-4 w-4"}),N(e.date)]})]}),e.notes&&(0,a.jsx)("div",{className:"mt-3 text-sm text-gray-500",children:(0,a.jsx)("p",{className:"line-clamp-2",children:e.notes})})]})})},e.id)}),v&&(0,a.jsx)("div",{className:"flex justify-center pt-4",children:(0,a.jsx)(n.$,{onClick:()=>{i(e=>e+1)},variant:"outline",className:"w-full border-gray-200 text-[#007AFF] hover:bg-gray-50 transition-colors",disabled:p,children:p?"Loading...":"See More"})})]}),(0,a.jsx)(td,{value:"calendar",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(K,{mode:"single",selected:e,onSelect:t,className:"rounded-xl border border-gray-100 w-full max-w-[350px] shadow-sm"}),(0,a.jsxs)("div",{className:"w-full mt-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3 px-1",children:e?e.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Select a date"}),e&&(0,a.jsx)("div",{className:"space-y-3",children:u.filter(t=>new Date(t.date).toDateString()===e.toDateString()).map(e=>(0,a.jsx)(r.Zp,{className:"border border-gray-100 shadow-sm hover:shadow-md transition-all",children:(0,a.jsx)(r.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," • ",j(e.durationHours,e.durationMinutes)]})]}),(0,a.jsx)(th,{className:"".concat("class"===e.activityType?"bg-[#5856D6]/10 text-[#5856D6] border-0":"bg-[#34C759]/10 text-[#34C759] border-0"," text-xs font-medium px-3 py-1 rounded-full"),children:e.activityType})]})})},e.id))})]})]})})]}):(0,a.jsxs)(eH.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col items-center justify-center py-12 bg-white rounded-xl shadow-lg border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"No Workouts Yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6 text-center max-w-md",children:"You haven't recorded any workouts yet. Start tracking your fitness journey by recording your first workout!"}),(0,a.jsxs)(n.$,{variant:"outline",onClick:()=>d(!0),className:"border-gray-200 text-accent hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Record Workout"]})]})}),(0,a.jsx)(eU,{isDialogOpen:o,setIsDialogOpen:d,handleSubmitActivity:w})]})}var tf=s(3908),ty=s(4508),tv=s(3755);let tj=(0,tm.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function tN(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,j.cn)(tj({variant:s}),t),...r})}function tw(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,j.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}var tb=s(4057),tk=s(9690),tA=s(1778),tC=s(2935);let tP="You are a helpful and encouraging personal trainer AI assistant. You provide personalized fitness advice, workout suggestions, and motivation based on the user's profile, goals, and fitness level. \n\nKeep your responses:\n- Encouraging and positive\n- Practical and actionable\n- Tailored to the user's specific situation\n- Professional but friendly\n\nAlways consider the user's fitness level, any injuries or health conditions, and their stated goals when giving advice.",tS="AI Trainer";function t_(){let[e,t]=(0,l.useState)(tS),[s,i]=(0,l.useState)(tP),[c,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!1),{data:h,isLoading:p,refetch:f}=g.F.myPt.getSystemPrompt.useQuery(),{mutate:y,isPending:v}=g.F.myPt.saveSystemPrompt.useMutation({onSuccess:e=>{e7.o.success("Your AI trainer has been customized!"),d(!1),m(!1),f()},onError:e=>{console.error("Failed to save system prompt:",e),e7.o.error(e.message||"Failed to save customization")}});(0,l.useEffect)(()=>{if(h){var e,s;t(null!=(e=h.name)?e:tS),i(null!=(s=h.prompt)?s:tP)}},[h]),(0,l.useEffect)(()=>{var t,a;let r=null!=(t=null==h?void 0:h.name)?t:tS,n=null!=(a=null==h?void 0:h.prompt)?a:tP;m(e!==r||s!==n)},[e,s,h]);let j=async()=>{if(!e.trim())return void e7.o.error("Please enter a name for your AI trainer");if(!s.trim())return void e7.o.error("Please enter a system prompt");try{await y({id:null==h?void 0:h.id,name:e.trim(),prompt:s.trim()})}catch(e){console.error("Failed to save:",e)}},N=()=>{var e,s;t(null!=(e=null==h?void 0:h.name)?e:tS),i(null!=(s=null==h?void 0:h.prompt)?s:tP),m(!1)};return(0,a.jsx)(r.Zp,{className:"h-[600px] flex flex-col",children:(0,a.jsx)(r.Wu,{className:"flex-1 flex flex-col gap-4",children:p?(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Loading your trainer settings..."})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(tN,{children:[(0,a.jsx)(tA.A,{className:"h-4 w-4"}),(0,a.jsx)(tw,{children:"Customize how your AI personal trainer behaves and responds to you. Give them a name and personality that motivates you!"})]}),(0,a.jsxs)("div",{className:"space-y-4 flex-1",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"trainer-name",children:"Trainer Name"}),(0,a.jsx)(o.p,{id:"trainer-name",placeholder:"e.g. Coach Sarah, Fitness Buddy, etc.",value:e,onChange:e=>t(e.target.value),disabled:!c,className:c?"border-primary":""})]}),(0,a.jsxs)("div",{className:"space-y-2 flex-1 flex flex-col",children:[(0,a.jsx)(S.J,{htmlFor:"system-prompt",children:"System Prompt"}),(0,a.jsx)(P.T,{id:"system-prompt",placeholder:"Describe how you want your AI trainer to behave...",value:s,onChange:e=>i(e.target.value),disabled:!c,className:"flex-1 min-h-[200px] resize-none ".concat(c?"border-primary":"")}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tip: Be specific about the tone, style, and approach you prefer. The AI will use this to tailor all responses to your preferences."})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.$,{onClick:j,disabled:v||!u,className:"flex-1",children:[(0,a.jsx)(tC.A,{className:"h-4 w-4 mr-2"}),v?"Saving...":"Save Changes"]}),(0,a.jsxs)(n.$,{variant:"outline",onClick:N,disabled:v||!u,children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Reset"]}),(0,a.jsx)(n.$,{variant:"outline",onClick:()=>{t(tS),i(tP)},disabled:v,children:"Use Default"}),(0,a.jsx)(n.$,{variant:"ghost",onClick:()=>{d(!1),N()},disabled:v,children:"Cancel"})]}):(0,a.jsxs)(n.$,{onClick:()=>d(!0),className:"flex-1",children:[(0,a.jsx)(ty.A,{className:"h-4 w-4 mr-2"}),"Edit Customization"]})}),!h&&!p&&(0,a.jsxs)(tN,{children:[(0,a.jsx)(tb.A,{className:"h-4 w-4"}),(0,a.jsx)(tw,{children:"You haven't customized your AI trainer yet. The default settings will be used until you save your preferences."})]})]})})})}function tF(){let[e,t]=(0,l.useState)([]),[s,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(!1),[m,x]=(0,l.useState)(null),[h,p]=(0,l.useState)(!1),f=(0,l.useRef)(null),{data:y,isLoading:v}=g.F.myPt.getTrainerInfo.useQuery(),{data:j,isLoading:N}=g.F.myPt.getChatHistory.useQuery({limit:50},{enabled:null==y?void 0:y.isOnboardingComplete});(0,l.useEffect)(()=>{(null==j?void 0:j.messages)&&t(j.messages.map(e=>({id:e.id,content:e.content,role:e.role,timestamp:new Date(e.createdAt)})).reverse())},[j]),(0,l.useEffect)(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth"})},[e]);let{mutate:w}=g.F.myPt.sendMessage.useMutation({onSuccess:e=>{let s={id:Date.now().toString(),content:e.message,role:"assistant",timestamp:new Date};t(e=>[...e,s]),x(null)},onError:e=>{console.error("Failed to send message:",e),x(e.message)},onSettled:()=>{u(!1)}}),b=()=>{if(!s.trim())return;let e={id:Date.now().toString(),content:s,role:"user",timestamp:new Date};t(t=>[...t,e]),c(""),u(!0),x(null),w({message:s})};return v?(0,a.jsxs)(r.Zp,{className:"h-full flex flex-col",children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(tf.A,{className:"h-5 w-5"}),"AI Personal Trainer"]})}),(0,a.jsx)(r.Wu,{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Loading your AI trainer..."})})]}):(null==y?void 0:y.isOnboardingComplete)?(0,a.jsxs)("div",{className:"flex flex-col h-[700px]",children:[(0,a.jsx)(r.aR,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(tf.A,{className:"h-5 w-5"}),"AI Personal Trainer"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[y&&(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[y.messageCount," messages"]}),(0,a.jsxs)(i.lG,{open:h,onOpenChange:p,children:[(0,a.jsx)(i.zM,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>p(!0),className:"h-8 w-8",children:(0,a.jsx)(ty.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(i.Cf,{className:"max-w-2xl p-0",children:[(0,a.jsx)(i.L3,{className:"px-6 pt-6 pb-2",children:"Customize My PT"}),(0,a.jsx)(t_,{})]})]})]})]})}),(0,a.jsxs)(r.Wu,{className:"flex-1 flex flex-col p-0",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:[N&&0===e.length?(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Loading chat history..."}):0===e.length?(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,a.jsx)(tf.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"Start a conversation with your AI personal trainer!"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Ask about workouts, nutrition, goals, or anything fitness-related."})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[e.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"rounded-lg px-4 py-2 max-w-full break-words ".concat("user"===e.role?"bg-primary text-primary-foreground":"bg-muted"),style:{wordBreak:"break-word",overflowWrap:"break-word"},children:[(0,a.jsx)("div",{className:"text-sm",children:e.content}),(0,a.jsx)("div",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString()})]})},e.id)),(0,a.jsx)("div",{ref:f})]}),d&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-muted rounded-lg px-4 py-2",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("div",{className:"animate-pulse",children:"Thinking..."})})})})]}),(0,a.jsxs)("div",{className:"p-4 border-t bg-white sticky bottom-0",children:[m&&(0,a.jsxs)(tN,{variant:"destructive",className:"mb-4",children:[(0,a.jsx)(tk.A,{className:"h-4 w-4"}),(0,a.jsx)(tw,{children:m})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.p,{placeholder:"Ask your AI trainer anything...",value:s,onChange:e=>c(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&b(),disabled:d,className:"flex-1"}),(0,a.jsx)(n.$,{onClick:b,disabled:d||!s.trim(),children:(0,a.jsx)(tv.A,{className:"h-4 w-4"})})]})]})]})]}):(0,a.jsxs)(r.Zp,{className:"h-[600px] flex flex-col",children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(tf.A,{className:"h-5 w-5"}),"My PT"]})}),(0,a.jsx)(r.Wu,{className:"flex-1 flex items-center justify-center",children:(0,a.jsxs)(tN,{children:[(0,a.jsx)(tb.A,{className:"h-4 w-4"}),(0,a.jsx)(tw,{children:"Please complete your onboarding first to start chatting with your AI personal trainer."})]})})]})}function tD(){return(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:(0,a.jsx)(tF,{})})}var tM=s(8139),tR=s(8276);function tT(){let e=(0,eK.useRouter)(),t=(0,eK.useSearchParams)().get("sessionType");return(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors pt-4",children:[(0,a.jsx)(tR.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Back"})]}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("hapana-widget",{"data-type":"classes","widget-id":"a3NHYThQaytzMko2UEJGQ25FMXU5UT09","instructor-id":"","session-type":t})}),(0,a.jsx)(tM.default,{src:"https://widget.hapana.com/hapana_widget.js",strategy:"afterInteractive"})]})}function tW(e){let{tabs:t}=e;switch(t){case"overview":default:return(0,a.jsx)(ti,{});case"your-plan":return(0,a.jsx)(eX,{});case"history":return(0,a.jsx)(tg,{});case"mypt":return(0,a.jsx)(tD,{});case"classes":return(0,a.jsx)(tT,{})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[745,43,874,273,114,475,285,362,594,340,149,587,315,977],()=>t(6808)),_N_E=e.O()}]);